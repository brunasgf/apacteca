    <script>

      window.onload = () => {
        read();
      };

      function templateLista(id, titulo, autor, element = true) {
        return `
              ${element ? `<tr>` : ''}
              <td>${titulo}</td>
              <td>${autor}</td>
              <td><i class="view fa fa-eye" data-toggle="modal" data-target="#modalVisualizar" onclick="view(${id})"></i></td>
              <td><i class="update fa fa-edit" data-toggle="modal" data-target="#modalEditar" onclick="viewEdit(${id}); editId = ${id}"></i></td>
              <td><i class="delete fa fa-trash" data-toggle="modal" onclick="del(${id})"></i></td>
              ${element ? `</tr>` : ''}
        `;

      }

      function read() {
        lista.innerHTML = '';
        axios.post('http://localhost:8001/job/getAll')
          .then((response) => {
            if(response.data.data.length){
              response.data.data.forEach(element => {
                lista.innerHTML += templateLista(element.id_Obra, element.titulo, element.autor, element.descricao);
              });
            } else {
              lista.innerHTML += `
              <tr>
              <td colspan="5">Nenhuma obra encontrada</td>
              </tr>
        `;
            }
          })
          .catch((error) => {
            console.log(error);
          });
      }

      function create() {
        var tipo;
        var genero = getIdGenero(document.getElementById('genero').value);

        if (document.getElementById('tipo').value == 'Livro') {
          tipo = 1;
        } else {
          tipo = 2;
        }

        axios.post('http://localhost:8001/job', {
          qtd: qtd.value,
          titulo: titulo.value,
          idGenero: genero,
          idTipo: tipo,
          autor: autor.value,
          descricao: descricao.value
        })
          .then(function (response) {
            read();
            console.log(response);
            qtd.value = '';
            titulo.value = '';
            autor.value = '';
            descricao.value = '';
          })
          .catch(function (error) {
            console.log(error);
          });
      }


      function del(id) {
        axios.delete(`http://localhost:8001/job/${id}`)
          .then(function (response) {
            if (response.status = 200) {
              alert(response.data.message)
              read();
            }
          })
          .catch(function (error) {
            console.log(error);
          });
      }

      function viewEdit(id) {
        axios.get(`http://localhost:8001/job/${id}`)
          .then((response) => {
            response.data.data.forEach(element => {

              tituloEd.value = element.titulo;
              tipoSelected(element.tipo, 'tipoEd');
              autorEd.value = element.autor;
              quantidadeEd.value = element.qtd;
              descricaoEd.value = element.descricao;
              statusEd.value = element.status;
              generoSelected(element.genero, 'generoEd');
              console.log(element.status);
            });
          })
          .catch((error) => {
            console.log(error);
          });

      }

      function update() {
        console.log("entrei")
        let tipo = null
        if (tipoEd == 'Livro') {
          tipo = 1;
        } else {
          tipo = 2;
        }

        var status;
        var genero;

        axios.get(`http://localhost:8001/job/${editId}`)
          .then((response) => {
            response.data.data.forEach(element => {
              status = element.status;
              genero = getIdGenero(element.genero);
              console.log(genero);

              axios.put(`http://localhost:8001/job/${editId}`, {
                qtd: quantidadeEd.value,
                titulo: tituloEd.value,
                idGenero: genero,
                idTipo: tipo,
                autor: autorEd.value,
                descricao: descricaoEd.value
              })
                .then((response) => {
                  if (response.status = 200) {
                    read();
                  }
                })
                .catch(function (error) {
                  console.log(error);
                });
            });
          })
          .catch((error) => {
            console.log(error);
          });


      }

      function view(id) {
        axios.get(`http://localhost:8001/job/${id}`)
          .then((response) => {
            response.data.data.forEach(element => {

              tituloView.value = element.titulo;
              tipoSelected(element.tipo, 'tipoView');
              autorView.value = element.autor;
              quantidadeView.value = element.qtd;
              descricaoView.value = element.descricao;
              statusView.value = element.status;
              generoSelected(element.genero, 'generoView')
            });
          })
          .catch((error) => {
            console.log(error);
          });

      }

      function tipoSelected(tipo, id) {
        document.getElementById(id).innerHTML = '';
        if (tipo == 'Livro') {
          document.getElementById(id).innerHTML +=
            `<option selected>Livro</option>
                <option>DVD</option>`
        } else {
          document.getElementById(id).innerHTML +=
            `<option>Livro</option>
                <option selected>DVD</option>`
        }
      }

      function getIdStatus(status) {
        if (status == 'Livre') {
          return 1;
        } else {
          return 2;
        }
      }


      function getTipoStatus(id) {
        if (id == 1) {
          return 'Livre';

        } else {
          return 'Emprestado';
        }
      }

      function getIdGenero(genero) {
        if (genero == 'Terror') {
          return '1';
        } else if (genero == 'Infantil') {
          return '2';
        } else if (genero == 'Ação') {
          return '3';
        } else if (genero == 'Autoajuda') {
          return '4';
        } else if (genero == 'Biográfico') {
          return '5';
        } else if (genero == 'Científico') {
          return '6';
        } else if (genero == 'Conto') {
          return '7';
        } else if (genero == 'Crônicas') {
          return '8';
        } else if (genero == 'Épico') {
          return '9';
        } else if (genero == 'Fantasia') {
          return '10';
        } else if (genero == 'Ficção científica') {
          return '11';
        } else if (genero == 'Ficção histórica') {
          return '12';
        } else if (genero == 'Poesia') {
          return '13';
        } else if (genero == 'Política') {
          return '14';
        } else if (genero == 'Romance') {
          return '15';
        } else if (genero == 'Novela') {
          return '16';
        } else if (genero == 'Outros') {
          return '17';
        }
      }

      function generoSelected(tipo, idLista) {
        document.getElementById(idLista).innerHTML += '<option selected>' + tipo + '<option>';

      }

      function getTipoGenero(id) {
        if (id == 1) {
          return 'Terror';
        } else if (id == 2) {
          return 'Infantil';
        } else if (id == 3) {
          return 'Ação';
        } else if (id == 4) {
          return 'Autoajuda';
        } else if (id == 5) {
          return 'Biográfico';
        } else if (id == 6) {
          return 'Científico';
        } else if (id == 7) {
          return 'Conto';
        } else if (id == 8) {
          return 'Crônicas';
        } else if (id == 9) {
          return 'Épico';
        } else if (id == 10) {
          return 'Fantasia';
        } else if (id == 11) {
          return 'Ficção científica';
        } else if (id == 12) {
          return 'Ficção histórica';
        } else if (id == 13) {
          return 'Poesia';
        } else if (id == 14) {
          return 'Política';
        } else if (id == 15) {
          return 'Romance';
        } else if (id == 16) {
          return 'Novela';
        } else if (id == 17) {
          return 'Outros';
        }
      }
    </script>